(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{135:function(e,t,a){e.exports=a.p+"static/media/mob1.ed0431d9.png"},136:function(e,t,a){e.exports=a.p+"static/media/mob2.c685f4e0.png"},147:function(e,t,a){e.exports=a(178)},152:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},159:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){},173:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},178:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(15),l=a.n(c),i=(a(152),a(82)),s=a(20);a(153),a(154);var o=function(e){return r.a.createElement("div",{className:"banner"})},u=a(22),m=a(52),d=a(23),f=a(217),g=a(95),E=a.n(g),p=a(214),b=a(216),v=a(222);a(155);function h(e){return r.a.createElement(v.a,{position:"relative",display:"inline-flex"},r.a.createElement(p.a,Object.assign({variant:"static"},e)),r.a.createElement(v.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},r.a.createElement(b.a,{variant:"caption",component:"div",color:"textSecondary"},"".concat(Math.round(e.value),"%"))))}function y(){var e=r.a.useState(10),t=Object(u.a)(e,2),a=t[0],n=t[1];return r.a.useEffect((function(){var e=setInterval((function(){n((function(e){return e>=100?10:e+10}))}),800);return function(){clearInterval(e)}}),[]),r.a.createElement(h,{value:a})}a(159);var _=a(98);a(161),a(162);_.a.initializeApp({apiKey:"AIzaSyBpn5g7OJelbqQ00swBZ0el6xdLYeRJ29k",authDomain:"cogent-emblem-287715.firebaseapp.com",projectId:"cogent-emblem-287715",storageBucket:"cogent-emblem-287715.appspot.com",messagingSenderId:"144374922560",appId:"1:144374922560:web:2e3d4adcc8cebf54934ea5"});var O=_.a.auth,j=_.a.firestore();function N(e){return{type:"SET_USER",payload:e}}function w(e){return{type:"ADD_TO_WATCH_LIST",payload:e}}function k(e){return{type:"SET_ALERT",payload:e}}var S=a(21),C=a(223);function T(){var e=Object(m.a)(["\n    query AnimeQuery($id: String!){\n      anime(animeId: $id){\n        trailer_url\n      }\n    }\n    "]);return T=function(){return e},e}function A(){var e=Object(m.a)(["\n  query AnimeGenreQuery($arg: String!){\n    genres(genreId: $arg){\n      mal_id\n      title\n      image_url\n      url\n      synopsis\n    }\n  }\n  "]);return A=function(){return e},e}var P=Object(d.gql)(A()),x=Object(d.gql)(T());var I=function(e){var t,a,c,l=e.genreId,i=Object(S.c)((function(e){return e.user.id})),s=Object(S.c)((function(e){return e.watchlist})),o=Object(S.b)(),m=Object(n.useState)(l.toString()),g=Object(u.a)(m,2),p=g[0],b=g[1],v=Object(n.useState)(""),h=Object(u.a)(v,2),_=h[0],O=h[1],N=Object(d.useLazyQuery)(x),T=Object(u.a)(N,2),A=T[0],I=T[1],L=(I.loading,I.data);Object(n.useEffect)((function(){b(l.toString())}),[l]);var B=Object(d.useQuery)(P,{variables:{arg:p}}),U=B.loading,M=B.error,R=B.data;return(null===L||void 0===L||null===(t=L.anime)||void 0===t?void 0:t.trailer_url)&&_!==(null===L||void 0===L||null===(a=L.anime)||void 0===a?void 0:a.trailer_url)&&O(L.anime.trailer_url),U?r.a.createElement("div",{className:"reload"},r.a.createElement(y,null)):M?r.a.createElement("p",null,"Error :("):r.a.createElement("div",{className:"genres"},r.a.createElement("div",{style:{display:"none"},className:"trailer"},r.a.createElement("iframe",{src:_}),r.a.createElement("button",{onClick:function(e){O(""),A({variables:{id:""}}),document.getElementsByTagName("iframe")[0].setAttribute("src",""),document.getElementsByClassName("trailer")[0].style.display="none"},className:"toggler"},r.a.createElement(f.a,{className:"fas fa-window-close"}))),r.a.createElement("div",{className:"genres__container"},null===(c=R.genres)||void 0===c?void 0:c.map((function(e){return r.a.createElement("div",{key:Object(C.a)(),className:"animeCard"},r.a.createElement("img",{src:e.image_url,alt:""}),r.a.createElement("p",null,e.title),r.a.createElement("div",{className:"card__info"},r.a.createElement("a",{onClick:function(t){t.preventDefault(),A({variables:{id:e.mal_id}}),document.getElementsByClassName("trailer")[0].style.display="block",document.getElementsByTagName("iframe")[0].setAttribute("src","".concat(_))},href:""},"Trailer"),r.a.createElement("a",{href:e.url,target:"_blank"},"Learn more")),r.a.createElement("button",{onClick:function(){return function(e){""!==i?s.includes(e.mal_id)?o(k({type:"error",message:"already in watchlist"})):j.collection("users").doc(i).collection("watchlist").doc(e.mal_id).set({title:e.title,description:e.synopsis,image:e.image_url,link:e.url,id:e.mal_id}).then((function(){o(k({type:"success",message:"Added to watchlist "})),o(w(e.mal_id))})).catch((function(e){o(k({type:"error",message:"Error adding document: "+e}))})):o(k({type:"error",message:"Must be logged in"}))}(e)},className:"anime_add"},r.a.createElement(E.a,null),"Add to watchlist"))}))))};a(167);function L(){var e=Object(m.a)(["\n    query AnimeQuery($id: String!){\n      anime(animeId: $id){\n        trailer_url\n      }\n    }\n    "]);return L=function(){return e},e}function B(){var e=Object(m.a)(["\n  query AnimeGenreQuery($arg: String!){\n    schedule(day: $arg){\n      mal_id\n      title\n      image_url\n      url\n      synopsis\n    }\n  }\n  "]);return B=function(){return e},e}var U=Object(d.gql)(B()),M=Object(d.gql)(L());var R=function(e){var t,a,c,l=e.day,i=Object(n.useState)(l),s=Object(u.a)(i,2),o=s[0],m=s[1],g=Object(n.useState)(""),p=Object(u.a)(g,2),b=p[0],v=p[1],h=Object(S.c)((function(e){return e.watchlist})),_=Object(S.c)((function(e){return e.user.id})),O=Object(S.b)(),N=Object(d.useLazyQuery)(M),T=Object(u.a)(N,2),A=T[0],P=T[1].data;Object(n.useEffect)((function(){m(l)}),[l]);var x=Object(d.useQuery)(U,{variables:{arg:o}}),I=x.loading,L=x.error,B=x.data;return(null===P||void 0===P||null===(t=P.anime)||void 0===t?void 0:t.trailer_url)&&b!==(null===P||void 0===P||null===(a=P.anime)||void 0===a?void 0:a.trailer_url)&&v(P.anime.trailer_url),I?r.a.createElement("div",{className:"reload"},r.a.createElement(y,null)):L?r.a.createElement("p",null,"Error :("):r.a.createElement("div",{className:"genres"},r.a.createElement("div",{style:{display:"none"},className:"trailer"},r.a.createElement("iframe",{src:b}),r.a.createElement("button",{onClick:function(e){v(""),A({variables:{id:""}}),document.getElementsByTagName("iframe")[1].setAttribute("src",""),document.getElementsByClassName("trailer")[1].style.display="none"},className:"toggler"},r.a.createElement(f.a,{className:"fas fa-window-close"}))),r.a.createElement("div",{className:"genres__container"},null===(c=B.schedule)||void 0===c?void 0:c.map((function(e){return r.a.createElement("div",{key:Object(C.a)(),className:"animeCard"},r.a.createElement("img",{src:e.image_url,alt:""}),r.a.createElement("p",null,e.title),r.a.createElement("div",{className:"card__info"},r.a.createElement("a",{onClick:function(t){t.preventDefault(),A({variables:{id:e.mal_id}}),document.getElementsByClassName("trailer")[1].style.display="block",document.getElementsByTagName("iframe")[1].setAttribute("src","".concat(b))},href:""},"Trailer"),r.a.createElement("a",{href:e.url,target:"_blank"},"Learn more")),r.a.createElement("button",{onClick:function(){return function(e){h.includes(e.mal_id)?O(k({type:"error",message:"already in watchlist"})):j.collection("users").doc(_).collection("watchlist").doc(e.mal_id).set({title:e.title,description:e.synopsis,image:e.image_url,link:e.url,id:e.mal_id}).then((function(){O(k({type:"success",message:"Added to watchlist "})),O(w(e.mal_id))})).catch((function(e){O(k({type:"error",message:"Error adding document: "+e}))}))}(e)},className:"anime_add"},r.a.createElement(E.a,null),"Add to watchlist"))}))))},D=a(218),q=a(137),H=a(224),Q=a(133),$=a.n(Q),F=(a(168),["Action","Adventure","Cars","Comedy","Dementia","Demons","Mystery","Dram","Ecchi","Fantasy","Game","Hentai","Historical","Horror","Kids","Magic","Martial Arts","Mecha","Music","Parody","Samurai","Romance","School","Sci Fi","Shoujo","Shoujo Ai","Shounen","Shounen Ai","Space","Sports","Super Power","Vampire","Yaoi","Yuri","Harem","Slice Of Life","Supernatural","Military","Police","Psychological","Seinen Josei Doujinshi"]),W=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];var J=function(){var e=Object(n.useState)("sunday"),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)("Action"),i=Object(u.a)(l,2),s=i[0],o=i[1],m=r.a.useState(null),d=Object(u.a)(m,2),f=d[0],g=d[1],E=Boolean(f),p=function(e){if(g(null),F.indexOf(e.currentTarget.innerText)>=0){o(e.currentTarget.innerText);F.indexOf(e.currentTarget.innerText)}};return r.a.createElement("div",{className:"left"},r.a.createElement("h1",null,"Genres"),r.a.createElement("div",{className:"genres__selector"},r.a.createElement(D.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){g(e.currentTarget)}},s,r.a.createElement($.a,null)),r.a.createElement(q.a,{id:"long-menu",anchorEl:f,keepMounted:!0,open:E,onClose:p,PaperProps:{style:{maxHeight:216,width:"20ch"}}},F.map((function(e){return r.a.createElement(H.a,{key:e,selected:"Pyxis"===e,onClick:p},e)})))),r.a.createElement(I,{genreId:F.indexOf(s)+1}),r.a.createElement("h1",null,"Schedule"),r.a.createElement("ul",{className:"schedule__days"},W.map((function(e){return r.a.createElement("li",{key:e,className:"day",onClick:function(e){c(e.target.innerText),function(e){for(var t=document.getElementsByClassName("day"),a=0;a<t.length;a++)t[a].style.backgroundColor="transparent";e.currentTarget.style.backgroundColor="#ffff00"}(e)}},e)}))),r.a.createElement(R,{day:a}))};a(169);function z(){var e=Object(m.a)(["\n  query AnimeQuery($arg: String!){\n    top(subtype: $arg){\n      mal_id\n      rank\n      title\n      image_url\n      url\n    }\n  }\n"]);return z=function(){return e},e}var G=Object(d.gql)(z());var V=function(){var e,t,a=Object(d.useQuery)(G,{variables:{arg:"upcoming"}}),n=a.loading,c=a.error,l=a.data;return n?r.a.createElement("div",{className:"reload"},r.a.createElement(y,null)):c?r.a.createElement("p",null,"Error :("):r.a.createElement("div",{className:"top"},l?null===l||void 0===l||null===(e=l.top)||void 0===e||null===(t=e.slice(0,10))||void 0===t?void 0:t.map((function(e){return r.a.createElement("div",{key:Object(C.a)(),target:"_blank",className:"animeCard"},r.a.createElement("a",{href:e.url,target:"_blank"},r.a.createElement("img",{src:e.image_url,alt:""}),r.a.createElement("p",null,e.title),r.a.createElement("div",{className:"card__rank"},e.rank)))})):null)};a(170);var Y=function(){return r.a.createElement("div",{className:"right"},r.a.createElement("h1",null,"TOP Upcoming"),r.a.createElement(V,{key:"top"}))},K=a(134),Z=a.n(K);a(171);function X(){var e=Object(S.c)((function(e){return e})),t=Object(n.useState)([]),a=Object(u.a)(t,2),c=a[0],l=a[1],i=Object(S.b)(),o=Object(s.f)();Object(n.useEffect)((function(){""===e.user.id?o.push("/"):j.collection("users").doc(e.user.id).collection("watchlist").get().then((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),l([].concat(t))})).catch((function(e){i(k({type:"error",message:"Error getting documents: "+e}))}))}),[e.watchlist]);return r.a.createElement("div",{className:"watchlist"},c.map((function(t){return r.a.createElement("div",{className:"watchlist__anime"},r.a.createElement("div",{className:"watchlist__left"},r.a.createElement("div",{className:"watchlist__anime__title"},t.title),r.a.createElement("div",{className:"watchlist__anime__image"},r.a.createElement("img",{src:t.image,alt:""})),r.a.createElement("div",{className:"watchlist__anime__link"},r.a.createElement("a",{href:t.link,target:"_blank"},t.link))),r.a.createElement("div",{className:"watchlist__right"},r.a.createElement("div",{className:"watchlist__anime__description"},t.description)),r.a.createElement("div",{className:"watchlist__remove"},r.a.createElement("button",{onClick:function(){var a;a=t.id,j.collection("users").doc(e.user.id).collection("watchlist").doc(a).delete().then((function(){i(k({type:"success",message:"Removed from watchlist"}))})).catch((function(e){i(k({type:"error",message:"Error getting documents: "+e}))})),i(function(e){return{type:"REMOVE_FROM_WATCH_LIST",payload:e}}(t.id))}},r.a.createElement(Z.a,null),"Remove from watchlist")))})))}var ee=a(220),te=a(219),ae=(a(173),a(174),a(175),a(135)),ne=a.n(ae),re=a(136),ce=a.n(re);function le(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),i=Object(u.a)(l,2),s=i[0],o=i[1],m=Object(n.useState)(""),d=Object(u.a)(m,2),f=d[0],g=d[1],E=Object(n.useState)("login"),p=Object(u.a)(E,2),b=p[0],v=p[1],h=Object(S.b)();Object(n.useEffect)((function(){document.getElementById("auth").addEventListener("click",(function(e){"auth"===e.target.id&&h({type:"SET_POP_UP"})}))}),[]);return r.a.createElement("div",{className:"auth",id:"auth"},"login"===b?r.a.createElement("div",{className:"register"},r.a.createElement("form",{className:"form",type:"submit",action:""},r.a.createElement("h1",null,"Log-in"),r.a.createElement("img",{id:"login-img",src:ne.a,alt:""}),r.a.createElement(ee.a,{className:"input",label:"e-mail",floatingLabelText:"e-mail",name:"username",type:"email",autoFocus:!0,value:a,onChange:function(e){c(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(ee.a,{value:s,className:"input",label:"password",floatingLabelText:"Password",name:"password",type:"password",onChange:function(e){return o(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(te.a,{variant:"contained",className:"btn",label:"Submit",primary:!0,onClick:function(e){e.preventDefault(),O().signInWithEmailAndPassword(a,s).then((function(e){h({type:"SET_POP_UP"}),j.collection("users").where("email","==",a).get().then((function(e){e.forEach((function(e){h(N({username:e.data().name,email:e.data().email,id:e.id}))}))})).catch((function(e){h(k({type:"error",message:"Error getting documents: "+e}))})),g(""),c(""),o("")})).catch((function(e){h(k({type:"error",message:e.message}))}))}},"Login"),r.a.createElement("p",null,"Don't have an account yet? ",r.a.createElement("span",{onClick:function(){c(""),o(""),v("register")}},"Register here"),"."))):r.a.createElement("div",{className:"login"},r.a.createElement("form",{className:"form",action:""},r.a.createElement("h1",null,"Register"),r.a.createElement("img",{id:"register-img",src:ce.a,alt:""}),r.a.createElement(ee.a,{value:f,className:"input",label:"username",hintText:"Enter Username",floatingLabelText:"Username",name:"username",autoFocus:!0,onChange:function(e){return g(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(ee.a,{className:"input",label:"e-mail",floatingLabelText:"e-mail",name:"username",type:"email",autoFocus:!0,value:a,onChange:function(e){c(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(ee.a,{value:s,className:"input",label:"password",floatingLabelText:"Password",name:"password",type:"password",onChange:function(e){return o(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(te.a,{variant:"contained",className:"btn",label:"Submit",primary:!0,onClick:function(e){!function(e){e.preventDefault(),O().createUserWithEmailAndPassword(a,s).then((function(e){j.collection("users").add({name:f,email:a,watchlist:""}).then((function(e){g(""),c(""),o("")})).catch((function(e){h(k({type:"error",message:"Error adding document: "+e}))})),v("login")})).catch((function(e){h(k({type:"error",message:"Error adding document: "+e.message}))}))}(e)}},"Register"),r.a.createElement("p",null,"Already have an account? ",r.a.createElement("span",{onClick:function(){g(""),c(""),o(""),v("login")}},"Login here"),"."))))}a(176);var ie=function(){var e=Object(S.b)(),t=Object(S.c)((function(e){return e})),a=Object(s.f)();return r.a.createElement("div",{className:"nav"},r.a.createElement("div",{className:"nav__logo",onClick:function(){return a.push("/")}},r.a.createElement(f.a,{className:"fas fa-dragon"}),r.a.createElement("h2",null,"C2Eanime")),r.a.createElement("div",{className:"nav__container"},""!==t.user.id?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"nav__watchlist"},r.a.createElement("button",{onClick:function(){return a.push("/watchlist")}},r.a.createElement(f.a,{className:"fas fa-list"})," Watchlist",r.a.createElement("span",null,t.watchlist.length))),r.a.createElement("div",{className:"nav__account"},r.a.createElement("button",{onClick:function(){O().signOut(),e(N({id:"",email:"",username:""})),a.push("/")}},r.a.createElement(f.a,{className:"fas fa-door-open"}),t.user.username))):r.a.createElement("div",{className:"nav__login"},r.a.createElement("button",{onClick:function(){e({type:"SET_POP_UP"})}},r.a.createElement(f.a,{className:"fas fa-door-closed"}),"Log-In"))),t.popUp?r.a.createElement(le,null):null)},se=a(97),oe=(a(177),new d.ApolloClient({uri:"https://react-anime-app.herokuapp.com/",cache:new d.InMemoryCache}));var ue=function(){var e=Object(S.c)((function(e){return e})),t=Object(S.b)();return Object(n.useEffect)((function(){var t=document.getElementById("app");e.popUp?t.style.height="100vh":t.style.height="auto"}),[e.popUp]),Object(n.useEffect)((function(){e.user.id&&j.collection("users").doc(e.user.id).collection("watchlist").get().then((function(e){e.forEach((function(e){t(w(e.id))}))})).catch((function(e){}))}),[e.user.id]),Object(n.useEffect)((function(){""!==e.alert.type&&("success"===e.alert.type?se.b.success(e.alert.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):se.b.error(e.alert.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}))}),[e.alert]),r.a.createElement("div",{className:"app",id:"app"},r.a.createElement(se.a,null),r.a.createElement(i.a,null,r.a.createElement(ie,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/watchlist"},r.a.createElement(X,{key:"watchlist"})),r.a.createElement(s.a,{path:"/"},r.a.createElement(d.ApolloProvider,{client:oe},r.a.createElement(o,{key:"banner"}),r.a.createElement("div",{className:"app__body"},r.a.createElement(J,{key:"left"}),r.a.createElement(Y,{key:"right "})))))))},me=a(91),de=a(138),fe=a(44),ge={popUp:!1,user:{id:"",email:"",username:""},watchlist:[],alert:{type:"",message:""}},Ee=Object(me.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_POP_UP":return Object(fe.a)(Object(fe.a)({},e),{},{popUp:!e.popUp});case"SET_USER":return Object(fe.a)(Object(fe.a)({},e),{},{user:t.payload});case"SET_ALERT":return Object(fe.a)(Object(fe.a)({},e),{},{alert:t.payload});case"ADD_TO_WATCH_LIST":return Object(fe.a)(Object(fe.a)({},e),{},{watchlist:[].concat(Object(de.a)(e.watchlist),[t.payload])});case"REMOVE_FROM_WATCH_LIST":for(var a=[],n=0;n<e.watchlist.length;n++){var r=e.watchlist[n];r!==t.payload&&a.push(r)}return Object(fe.a)(Object(fe.a)({},e),{},{watchlist:[].concat(a)});default:return e}return e}));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S.a,{store:Ee},r.a.createElement(ue,null))),document.getElementById("root"))}},[[147,1,2]]]);
//# sourceMappingURL=main.ded090a9.chunk.js.map